{"version":3,"file":"find.js","sources":["../find/find.js"],"sourcesContent":["import { decode } from \"../url\";\n// @ts-ignore\nimport links from \"./links.json\";\nconst movers = new Set([\" \", \"ArrowRight\"]);\nconst choosers = new Set([\"Enter\", \"ArrowLeft\"]);\n\nfunction index() {\n  const html = [];\n  for (const link of links) {\n    const url = new URL(location.href);\n    url.search = link.slice(3);\n    const sp = url.searchParams;\n    const videoId = sp.get(\"v\");\n    const src = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;\n    const cell = `\n      <a href=\"../play/${link}\">\n        <figure>\n          <img src=\"${src}\" loading=\"lazy\"\\>\n          <figcaption>${sp.get(\"t\")}</figcaption>\n        </figure>\n      </a>`;\n    html.push(cell);\n  }\n  const app = document.getElementById(\"app\");\n  if (!app) {\n    throw Error(\"Bad Dom\");\n  }\n  const message = document.getElementById(\"message\");\n  if (!message) {\n    throw Error(\"Bad Dom\");\n  }\n  app.innerHTML = html.join(\"\");\n  message.style.display = \"none\";\n  document.addEventListener(\"keyup\", (event) => {\n    console.log(event);\n    if (movers.has(event.key)) {\n      const targets = [...document.querySelectorAll(\"a\")];\n      const selected = document.activeElement;\n      let index = 0;\n      if (selected instanceof HTMLAnchorElement) {\n        index = (targets.indexOf(selected) + 1) % targets.length;\n      }\n      targets[index].focus();\n    } else if (choosers.has(event.key)) {\n      const selected = document.activeElement;\n      if (selected instanceof HTMLAnchorElement) {\n        selected.click();\n      }\n    }\n  });\n  const ReducedMotion = window.matchMedia(\n    `(prefers-reduced-motion: reduce)`,\n  ).matches;\n  let timer;\n  if (!ReducedMotion) {\n    app.addEventListener(\"focusin\", (event) => {\n      if (event.target instanceof HTMLAnchorElement) {\n        const figure = event.target.firstElementChild;\n        if (figure instanceof HTMLElement) {\n          // center of window\n          const wc = { x: window.innerWidth / 2, y: window.innerHeight / 2 };\n          // figure bounding box\n          const fcr = figure.getBoundingClientRect();\n          // center of figure\n          const fc = { x: fcr.x + fcr.width / 2, y: fcr.y + fcr.height / 2 };\n          // translate center of figure to center of screen\n          const delta = { x: wc.x - fc.x, y: wc.y - fc.y };\n          figure.style.transform = `translate(${delta.x}px, ${delta.y}px) scale(2)`;\n          figure.style.transition = `transform 0.2s linear`;\n          timer = setInterval(() => (figure.style.transform = \"\"), 5000);\n        }\n      }\n    });\n    app.addEventListener(\"focusout\", (event) => {\n      if (event.target instanceof HTMLAnchorElement) {\n        const figure = event.target.firstElementChild;\n        if (figure instanceof HTMLElement) {\n          figure.style.transform = \"\";\n          if (timer) {\n            clearInterval(timer);\n            timer = 0;\n          }\n        }\n      }\n    });\n  }\n}\n\nif (location.search) {\n  const game = decode(new URL(location.href));\n  console.log({ game });\n  play(game);\n} else {\n  index();\n}\n"],"names":[],"mappings":"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"}