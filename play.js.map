{"version":3,"file":"play.js","sources":["../url.js","../node_modules/youtube-iframe-ctrl/dist/YouTubeIFrameCtrl.js","../play/play.js"],"sourcesContent":["/* Encode and Decode games from URLs */\n\nconst site = \"http://localhost:8080\";\n\n/** @type {Game} */\nexport const example = {\n  title: \"Stopwatch - Count Up Timer (1 Hour)\",\n  video: \"FaWIn_wjo6w\",\n  start: 0.0,\n  timePoints: [\n    {\n      time: 1,\n      choices: [\n        {\n          prompt: \"p 1\",\n          next: 0,\n        },\n        {\n          prompt: \"start over\",\n          next: -1,\n        },\n        {\n          prompt: \"quit\",\n          next: -2,\n        },\n      ],\n    },\n    {\n      time: 3,\n      choices: [\n        {\n          prompt: \"p 3\",\n          next: 0,\n        },\n        {\n          prompt: \"p 2\",\n          next: 2,\n        },\n        {\n          prompt: \"start over\",\n          next: -1,\n        },\n        {\n          prompt: \"quit\",\n          next: -2,\n        },\n      ],\n    },\n    {\n      time: 7,\n      choices: [\n        {\n          prompt: \"p 7\",\n          next: 0,\n        },\n        {\n          prompt: \"start over\",\n          next: -1,\n        },\n        {\n          prompt: \"jump to end\",\n          next: 3590,\n        },\n      ],\n    },\n  ],\n};\n\n/** @param {string} key\n * @param {number} value\n */\nfunction signed(key, value) {\n  if (value < 0) {\n    key = key.toUpperCase();\n    value = -value;\n  }\n  return `${key}${value}`;\n}\n\n/**\n * @param {Game} game\n * @returns {URL}\n **/\nexport function encode(game) {\n  const url = new URL(site);\n  url.searchParams.append(\"t\", game.title);\n  url.searchParams.append(\"v\", game.video);\n  let t0 = Math.round(game.start * 10);\n  url.searchParams.append(\"s\", t0.toString());\n  const g = [];\n  const prompts = {};\n  for (const tp of game.timePoints) {\n    const time = Math.round(tp.time * 10);\n    g.push(`t${time - t0}`);\n    for (const choice of tp.choices) {\n      const p = choice.prompt.trim();\n      if (!(p in prompts)) {\n        prompts[p] = Object.keys(prompts).length;\n      }\n      let next = choice.next;\n      let key = { [0]: \"c\", [-1]: \"b\", [-2]: \"q\" }[next] || \"p\";\n      g.push(`${key}${prompts[p]}`);\n      if (key == \"p\") {\n        next = Math.round(10 * next - t0);\n        g.push(signed(\"n\", next));\n      }\n      t0 = time;\n    }\n  }\n  url.searchParams.append(\"g\", g.join(\"\"));\n  for (const prompt in prompts) {\n    url.searchParams.append(\"d\", prompt);\n  }\n  return url;\n}\n\n/**\n * Decode a URL into a game\n * @param {URL} url\n * @returns {Game}\n */\nexport function decode(url) {\n  const sp = url.searchParams;\n  /**\n   * Return value of a parameter or default\n   * @template {string | number} T\n   * @param {string} key\n   * @param {T} def\n   * @returns {T}\n   */\n  function P(key, def) {\n    const result = sp.get(key);\n    if (!result) {\n      return def;\n    }\n    if (typeof def === \"string\") {\n      return /** @type {T} */ (result);\n    } else if (typeof def === \"number\") {\n      return /** @type {T} */ (parseInt(result));\n    }\n    return def;\n  }\n\n  let t0 = P(\"s\", 0) / 10;\n  /** @type {Game} */\n  const game = {\n    title: P(\"t\", \"untitled\"),\n    video: P(\"v\", \"\"),\n    start: t0,\n    timePoints: [],\n  };\n  const prompts = [];\n  for (const [key, value] of sp) {\n    if (key == \"d\") {\n      prompts.push(value);\n    }\n  }\n  const interval = P(\"i\", 0) / 10;\n  const end = P(\"e\", 0) / 10;\n  const prompt = P(\"p\", \"\");\n  if (interval && end && prompt) {\n    for (let t = t0 + interval; t <= end; t += interval) {\n      game.timePoints.push({\n        time: t,\n        choices: [{ prompt, next: 0 }],\n      });\n    }\n  } else {\n    let pat = /[tT](?<time>\\d+)(?<choices>(?:[cbqpnN]\\d+)+)/g;\n    let cpat = /(?<key>[cbqp])(?<prompt>\\d+)(?:(?<sign>[nN])(?<next>\\d+))?/g;\n    for (const match of P(\"g\", \"\").matchAll(pat)) {\n      const groups = match.groups;\n      if (!groups) continue;\n      t0 += parseInt(groups.time) / 10;\n      /** @type {TimePoint} tp */\n      const tp = {\n        time: t0,\n        choices: [],\n      };\n      for (const cmatch of groups.choices.matchAll(cpat)) {\n        const groups = cmatch.groups;\n        if (!groups) continue;\n        const choice = {\n          prompt: prompts[+groups.prompt],\n          next: 0,\n        };\n        const key = groups.key;\n        if (key == \"b\") {\n          choice.next = -1;\n        } else if (key == \"q\") {\n          choice.next = -2;\n        } else if (key == \"p\") {\n          choice.next =\n            (parseInt(groups.next) / 10) * { n: 1, N: -1 }[groups.sign] + t0;\n        }\n        tp.choices.push(choice);\n      }\n      game.timePoints.push(tp);\n    }\n  }\n  return game;\n}\n\n/**\n * Compare objects for equality\n * @param {number | string | Object} a\n * @param {number | string | Object} b\n * returns {boolean}\n */\nfunction equal(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length == b.length) {\n      return a.every((v, i) => equal(v, b[i]));\n    }\n    return false;\n  }\n  if (typeof a == \"object\" && typeof b == \"object\") {\n    const ka = Object.keys(a).sort();\n    const kb = Object.keys(b).sort();\n    return equal(ka, kb) && ka.every((k) => equal(a[k], b[k]));\n  }\n\n  return false;\n}\n\nconst test = false;\nif (test) {\n  let u = encode(example);\n  let s = u.search;\n  if (s != window.location.search) window.location.search = s;\n  let u2 = new URL(window.location.href);\n  const result = decode(u2);\n  console.log(\"equal\", equal(example, result));\n}\n","export default class YouTubeIFrameCtrl {\n  errors = [\n    \"Element not found\",\n    \"Element is not an iframe\",\n    \"Youtube url does not include query parameter - enablejsapi=1 - JS API is disabled\",\n  ];\n  playerStates = {\n    [-2]: \"NOT_READY\",\n    [-1]: \"UNSTARTED\",\n    [0]: \"ENDED\",\n    [1]: \"PLAYING\",\n    [2]: \"PAUSED\",\n    [3]: \"BUFFERING\",\n    [5]: \"CUED\",\n  };\n  currentPlayerStateCode = -2;\n  iframe;\n  loaded;\n  messageListener = null;\n  constructor(iframe) {\n    let element = null;\n    if (typeof iframe === \"string\") {\n      element = document.querySelector(iframe);\n      if (element === null) {\n        this.throwError(0, iframe);\n      }\n    } else {\n      element = iframe;\n    }\n    if (element instanceof HTMLIFrameElement) {\n      this.iframe = element;\n    } else {\n      this.throwError(1);\n    }\n    if (!this.iframe.src.includes(\"enablejsapi=1\")) {\n      this.throwError(2, this.iframe.src);\n    }\n    this.loaded = new Promise((resolve) => {\n      let loaded = false;\n      const loadListener = () => {\n        this.iframe.removeEventListener(\"load\", loadListener);\n        setTimeout(() => {\n          this.iframe.contentWindow?.postMessage('{\"event\":\"listening\"}', \"*\");\n        });\n      };\n      this.iframe.addEventListener(\"load\", loadListener);\n      this.messageListener = (event) => {\n        if (event.source === this.iframe.contentWindow && event.data) {\n          let eventData;\n          try {\n            eventData = JSON.parse(event.data);\n          } catch {\n            return;\n          }\n          if (eventData.event === \"onReady\" && !loaded) {\n            loaded = true;\n            this.iframe.removeEventListener(\"load\", loadListener);\n            resolve(true);\n          }\n          if (typeof eventData.info?.playerState === \"number\") {\n            this.stateChangeHandler(eventData.info.playerState);\n          }\n          this.messageHandler(eventData);\n        }\n      };\n      window.addEventListener(\"message\", this.messageListener);\n      this.iframe.contentWindow?.postMessage('{\"event\":\"listening\"}', \"*\");\n    });\n  }\n  throwError(errorCode, optionalMessage) {\n    throw new Error(\n      this.errors[errorCode] + (optionalMessage ? `: ${optionalMessage}` : \".\"),\n    );\n  }\n  stateChangeHandler(playerStateCode) {\n    this.currentPlayerStateCode = playerStateCode;\n    const event = new CustomEvent(\"ytstatechange\", {\n      detail: this.playerStates[this.currentPlayerStateCode],\n    });\n    this.iframe.dispatchEvent(event);\n  }\n  messageHandler(data) {\n    const event = new CustomEvent(\"ytmessage\", { detail: data });\n    this.iframe.dispatchEvent(event);\n  }\n  async command(command, args) {\n    await this.loaded;\n    this.iframe.contentWindow?.postMessage(\n      JSON.stringify({\n        event: \"command\",\n        func: command,\n        args: args || [],\n      }),\n      \"*\",\n    );\n  }\n  async play() {\n    return this.command(\"playVideo\");\n  }\n  async pause() {\n    return this.command(\"pauseVideo\");\n  }\n  async stop() {\n    return this.command(\"stopVideo\");\n  }\n  async mute() {\n    return this.command(\"mute\");\n  }\n  async unMute() {\n    return this.command(\"unMute\");\n  }\n  get playerState() {\n    return this.playerStates[this.currentPlayerStateCode];\n  }\n}\n","import { decode } from \"../url\";\nimport YouTubeIFrameCtrl from \"youtube-iframe-ctrl\";\n\nconst movers = new Set([\" \", \"ArrowRight\"]);\nconst choosers = new Set([\"Enter\", \"ArrowLeft\"]);\n\n/** @param {Game} game */\nfunction play(game) {\n  const message = document.getElementById(\"message\");\n\n  if (!message) throw Error(\"bad dom\");\n\n  const iframe = `<iframe\n  id=\"youtube-iframe\"\n  src=\"https://www.youtube-nocookie.com/embed/${game.video}?enablejsapi=1\"\n  title=\"YouTube video player\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n  referrerpolicy=\"strict-origin-when-cross-origin\"\n  allowfullscreen\n>\n</iframe>`;\n\n  const app = document.getElementById(\"app\");\n  if (!app) throw Error(\"bad dom\");\n\n  app.innerHTML = iframe;\n\n  const iframeElement = document.querySelector(\"iframe\");\n  if (!iframeElement) throw Error(\"missing iframe\");\n  const player = new YouTubeIFrameCtrl(iframeElement);\n\n  let TPIndex = 0;\n  let Duration = 0;\n\n  showPrompt({ time: 0, choices: [{ prompt: \"Play\", next: -1 }] }, 0);\n\n  iframeElement.addEventListener(\n    \"ytmessage\",\n    (/** @type {CustomEvent} */ event) => {\n      const data = event.detail;\n      if (Duration == 0 && \"duration\" in data.info) {\n        Duration = data.info.duration;\n        console.log(\"Duration\", Duration);\n        if (Duration > 0) {\n          game.timePoints.push({\n            time: Duration,\n            choices: [\n              { prompt: \"Again?\", next: -1 },\n              { prompt: \"Quit\", next: -2 },\n            ],\n          });\n        }\n      }\n      const seconds = data.info.currentTime;\n      if (seconds >= game.timePoints[TPIndex].time) {\n        const tp = game.timePoints;\n        player.pause();\n        showPrompt(tp[TPIndex], 0);\n      }\n    },\n  );\n  iframeElement.addEventListener(\n    \"ytstatechange\",\n    (/** @type {CustomEvent} */ event) => {\n      console.log(\"Player state changed to:\", event.detail);\n      if (event.detail == \"ENDED\") {\n        const tp = game.timePoints;\n        showPrompt(tp[tp.length - 1], 0);\n      }\n    },\n  );\n\n  /**\n   * @param {TimePoint} tp\n   * @param {number} select\n   * */\n  function showPrompt(tp, select) {\n    if (!message) return;\n    message.replaceChildren();\n    const prompts = tp.choices.map(\n      (choice, index) =>\n        `<button ${index == select ? \"selected\" : \"\"} next=${choice.next}>${choice.prompt}</button>`,\n    );\n    message.innerHTML = prompts.join(\"\");\n    message.removeAttribute(\"hide\");\n  }\n\n  document.addEventListener(\"keyup\", (event) => {\n    if (movers.has(event.key)) {\n      const targets = [...document.querySelectorAll(\"button,a\")];\n      const selected = document.querySelector(\"[selected]\");\n      let index = 0;\n      if (selected) {\n        index = (targets.indexOf(selected) + 1) % targets.length;\n        selected.removeAttribute(\"selected\");\n      }\n      targets[index].setAttribute(\"selected\", \"\");\n    } else if (choosers.has(event.key)) {\n      const selected = document.querySelector(\"[selected]\");\n      if (selected instanceof HTMLElement) {\n        choose(selected);\n      }\n    }\n  });\n\n  document.addEventListener(\"pointerup\", (event) => {\n    if (event.target instanceof HTMLButtonElement) {\n      choose(event.target);\n    }\n  });\n\n  /** @param {HTMLElement} target */\n  function choose(target) {\n    if (target instanceof HTMLButtonElement) {\n      const next = parseInt(target.getAttribute(\"next\") || \"0\");\n      if (next == 0) {\n        TPIndex += 1;\n        go();\n      } else if (next == -1) {\n        TPIndex = 0;\n        player.command(\"seekTo\", [game.start, true]);\n        // player.seek(game.start);\n        go();\n      } else if (next == -2) {\n        console.log(\"quit\");\n        history.back();\n      } else {\n        // player.seek(next);\n        player.command(\"seekTo\", [next, true]);\n        for (let i = 0; i < game.timePoints.length; i++) {\n          if (game.timePoints[i].time >= next) {\n            TPIndex = i;\n            break;\n          }\n        }\n        go();\n      }\n    } else if (target instanceof HTMLAnchorElement) {\n      target.click();\n    }\n  }\n\n  function go() {\n    if (!message) throw Error(\"bad dom\");\n    message.setAttribute(\"hide\", \"\");\n    player.play();\n  }\n}\n\nif (location.search) {\n  const game = decode(new URL(location.href));\n  play(game);\n} else {\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[1]}